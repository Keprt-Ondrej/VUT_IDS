drop table certifikat CASCADE CONSTRAINTS;
drop table kurz CASCADE CONSTRAINTS;
drop table lekce CASCADE CONSTRAINTS;
drop table sal CASCADE CONSTRAINTS;
drop table osoba CASCADE CONSTRAINTS;
drop table kona_se CASCADE CONSTRAINTS;

create table certifikat(
    ID_certifikatu number generated by default as identity primary key,
    nazev varchar(50) not NULL,
    uroven varchar(20) not NULL
);

create table kurz(
    ID_kurzu number generated by default as identity primary key,
    typ varchar(20) not NULL,
    cena number default 0,
    datum_zacatku date not NULL,
    datum_konce date not NULL,
    obtiznost varchar(20) not NULL,
    popis varchar(100),
    kapacita number not NULL
);

create table lekce(
    ID_lekce number generated by default as identity primary key,
    typ varchar(20) not NULL,
    kapacita number NOT NULL,
    cena number default 0,
    obtiznost varchar(20) not NULL,
    delka_lekce number not NULL,
    popis varchar(100),
    ID_kurzu number default NULL, /*provazani mezi lekci a kurz */
    foreign key(ID_kurzu) references kurz(ID_kurzu) /*vazba: obsahuje*/
);

create table sal(
    cislo_salu number not NULL primary key,
    kapacita number not NULL,
    vybaveni varchar(200)
);

create table osoba(
    rodne_cislo char(11) not NULL primary key, /* pocita se i lomitko*/
    jmeno varchar(30) not NULL,
    prijmeni varchar(30) not NULL,
    tel_cislo number(9) not NULL,
    email varchar(30),
    psc number(5) not NULL,
    ulice varchar(30) not NULL,
    cislo_domu number not NULL,
    typ number default 0, /*typ jestli je to klient, instruktor, nebo oboji*/
    body number default 0,
    sleva number default 0
);

create table kona_se(
    cislo_salu number,
    ID_lekce number,
    datum_cas timestamp, /* pri navhu ERD jsme nevedeli, ze ciste promena pro cas neni, proto je zde nahrazeno datum a cas jednou promenou*/    
    foreign key(cislo_salu) references sal(cislo_salu),
    foreign key(ID_lekce) references lekce(ID_lekce),
    primary key (cislo_salu,ID_lekce)
);